{"version":3,"sources":["../index.ts","../compile/build.ts","../compile/compress.ts"],"sourcesContent":["export { build} from \"./compile/build\"\r\nexport { compress} from \"./compile/compress\"\r\n","import {relative, join} from 'path'\r\nimport {build as codeBuild, Options} from 'tsup'\r\n\r\nexport async function build( opt?: Options) {\r\n\r\n    const destPath: string = join(__dirname, '../src/main.tsx').replaceAll('\\\\', '/')\r\n    const option: Options = Object.assign({\r\n        entry: [destPath],\r\n        outDir: 'build',\r\n        format: ['esm', 'cjs'],\r\n        splitting: true,\r\n        sourcemap: true,\r\n        clean: false,\r\n    }, opt)\r\n        await codeBuild(option);\r\n}\r\n\r\n","import compressing, {tgz} from \"compressing\"\r\n// @ts-ignore\r\nimport pump from 'pump'\r\nimport FileStream = tgz.FileStream;\r\n\r\nfunction streamToBuffer(stream:FileStream):Promise<Buffer> {\r\n    return new Promise((resolve, reject) => {\r\n        const buffers:Array<Buffer> = [];\r\n        stream.on('error', reject);\r\n        stream.on('data', (data:Buffer) => buffers.push(data))\r\n        stream.on('end', () => resolve(Buffer.concat(buffers)))\r\n    });\r\n}\r\n\r\nexport async function compress (source:string):Promise<Buffer|never> {\r\n        const tarStream = new compressing.tar.Stream();\r\n        tarStream.addEntry(source);\r\n        const destStream = pump(tarStream, new compressing.gzip.FileStream());\r\n       return await streamToBuffer(destStream)\r\n}\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,kBAA6B;AAC7B,kBAA0C;AAE1C,qBAA6B,KAAe;AAExC,QAAM,WAAmB,sBAAK,WAAW,mBAAmB,WAAW,MAAM;AAC7E,QAAM,SAAkB,OAAO,OAAO;AAAA,IAClC,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,QAAQ,CAAC,OAAO;AAAA,IAChB,WAAW;AAAA,IACX,WAAW;AAAA,IACX,OAAO;AAAA,KACR;AACC,QAAM,uBAAU;AAAA;;;ACdxB,yBAA+B;AAE/B,kBAAiB;AACjB,IAAO,aAAa,uBAAI;AAExB,wBAAwB,QAAmC;AACvD,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,UAAM,UAAwB;AAC9B,WAAO,GAAG,SAAS;AACnB,WAAO,GAAG,QAAQ,CAAC,SAAgB,QAAQ,KAAK;AAChD,WAAO,GAAG,OAAO,MAAM,QAAQ,OAAO,OAAO;AAAA;AAAA;AAIrD,wBAAgC,QAAqC;AAC7D,QAAM,YAAY,IAAI,2BAAY,IAAI;AACtC,YAAU,SAAS;AACnB,QAAM,aAAa,yBAAK,WAAW,IAAI,2BAAY,KAAK;AACzD,SAAO,MAAM,eAAe;AAAA;","names":[]}
